name: Check Workflow via API

on:
  workflow_dispatch: # 仅手动触发

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Query GitHub API
        env:
          # 使用GitHub Actions内置的令牌，有权限访问本仓库
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          # 调用API并格式化输出
          response=$(curl -s -H "Authorization: token $GITHUB_TOKEN" \
                           -H "Accept: application/vnd.github.v3+json" \
                           https://api.github.com/repos/${{ github.repository }}/actions/workflows)
          echo "$response" | python -m json.tool
